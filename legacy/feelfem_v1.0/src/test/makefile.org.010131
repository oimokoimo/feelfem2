PLUSPLUS = g++
F77      = f77
F90      = f90
CC       = $(PLUSPLUS)
CFLAGS   = -g

INCLUDES = -I../class

LINKER   = $(CC)
MAKEFILE = Makefile
RANLIB   = ranlib
HDRS     = 
LIBS     = 
STDLIBS  = -lstdc++

FEELFEM_LIBDIR = -L../lib
SUBDIR_00 = Solve
SUBDIR_01 = SolverLibrary
SUBDIR_02 = MatrixModel
SUBDIR_03 = ProgramModel
SUBDIR_04 = Scheme
SUBDIR_05 = Source 
SUBDIR_06 = system
SUBDIR_07 = FiniteElement
SUBDIR_08 = Main
SUBDIR_80 = FromP2Interface
SUBDIR_90 = Object
SUBDIR_99 = basic 
SUBDIR_L0 = FiniteElement
SUBDIR_L1 = Solve
SUBDIR_S0 = SL_feelfem90DRAMA
SUBDIR_S1 = SL_feelfem90
SUBDIR_S2 = SL_feelP2
SUBDIR_S3 = SL_MT_P2CRS
SUBDIR_S4 = SL_MT_ff90PAMGCRS
SUBDIR_S5 = SL_MT_ff90AMGCRS
SUBDIR_S6 = SL_LIB_feelP2Achim
SUBDIR_S7 = SL_MT_P2Skyline
SUBDIR_S8 = SL_LIB_feelP2Skyline

FEELFEM_LIBS   =  -l$(SUBDIR_00) \
                  -l$(SUBDIR_01) \
                  -l$(SUBDIR_02) \
                  -l$(SUBDIR_03) \
                  -l$(SUBDIR_04) \
                  -l$(SUBDIR_05) \
                  -l$(SUBDIR_06) \
                  -l$(SUBDIR_07) \
                  -l$(SUBDIR_08) \
                  -l$(SUBDIR_80) \
                  -l$(SUBDIR_90) \
                  -l$(SUBDIR_L0) \
                  -l$(SUBDIR_L1) \
                  -l$(SUBDIR_02) \
                  -l$(SUBDIR_99) \
                  -l$(SUBDIR_S0) \
                  -l$(SUBDIR_S1) \
                  -l$(SUBDIR_S2) \
                  -l$(SUBDIR_S3) \
                  -l$(SUBDIR_S4) \
                  -l$(SUBDIR_S5) \
                  -l$(SUBDIR_S6) \
                  -l$(SUBDIR_S7) \
                  -l$(SUBDIR_S8) 

.SUFFIXES:   .cpp

.cpp.o:
	$(CC) $(CFLAGS) $(INCLUDES) -c $<

PROGRAM  = test
OBJS     = main.o makeSL.o

all : $(PROGRAM)

$(PROGRAM): $(OBJS)
	@echo -n "Making $(PROGRAM) ...\n"
	(cd ../$(SUBDIR_00)    ;make   ;cd ../test)
	(cd ../$(SUBDIR_01)    ;make   ;cd ../test)
	(cd ../$(SUBDIR_02)    ;make   ;cd ../test)
	(cd ../$(SUBDIR_03)    ;make   ;cd ../test)
	(cd ../$(SUBDIR_04)    ;make   ;cd ../test)
	(cd ../$(SUBDIR_05)    ;make   ;cd ../test)
	(cd ../$(SUBDIR_06)    ;make   ;cd ../test)
	(cd ../$(SUBDIR_07)    ;make   ;cd ../test)
	(cd ../$(SUBDIR_08)    ;make   ;cd ../test)
	(cd ../$(SUBDIR_80)    ;make   ;cd ../test)
	(cd ../$(SUBDIR_90)    ;make   ;cd ../test)
	(cd ../$(SUBDIR_99)    ;make   ;cd ../test)
	(cd ../SourceLibrary/$(SUBDIR_S0)    ;make   ;cd ../../test)
	(cd ../SourceLibrary/$(SUBDIR_S1)    ;make   ;cd ../../test)
	(cd ../SourceLibrary/$(SUBDIR_S2)    ;make   ;cd ../../test)
	(cd ../SourceLibrary/$(SUBDIR_S3)    ;make   ;cd ../../test)
	(cd ../SourceLibrary/$(SUBDIR_S4)    ;make   ;cd ../../test)
	(cd ../SourceLibrary/$(SUBDIR_S5)    ;make   ;cd ../../test)
	(cd ../SourceLibrary/$(SUBDIR_S6)    ;make   ;cd ../../test)
	(cd ../SourceLibrary/$(SUBDIR_S7)    ;make   ;cd ../../test)
	(cd ../SourceLibrary/$(SUBDIR_S8)    ;make   ;cd ../../test)
	$(LINKER) -o $(PROGRAM) $(OBJS) $(FEELFEM_LIBDIR) $(FEELFEM_LIBS) $(STDLIBS)
	@echo "done."

clean: ; rm -f $(PROGRAM) *~ *.o core

link: ; $(LINKER) -o $(PROGRAM) $(OBJS) $(FEELFEM_LIBDIR) $(FEELFEM_LIBS) $(STDLIBS)
